# Arduino Winding Machine

Это продолжение развития прошивки намоточного станка, созданного [Дмитрием Торцевым](https://vk.com/club192215032). Форк основан на версии прошивки [2.1b](https://github.com/apaex/ArduinoWindingMachine/tree/v2.1b), ничего более нового я не нашел. Ссылки на статьи и оригинальные версии прошивок:

* [Намоточный станок на Arduino версия 2.0](https://cxem.net/arduino/arduino245.php)
* [Намоточный станок на Arduino](https://cxem.net/arduino/arduino235.php)

### Список изменений:

* Поддержка многострочных дисплеев. 20х4, 16х2 и т.п.
* Русский язык интерфейса. Прикиньте)
* Новый модуль намотки. Теперь податчик перемещается непрерывно, без рывков, все разгоны и торможения делаются плавно, с ускорением, которое можно установить в настройках.
* Новый модуль управления позициями двигателей. Плавный разгон и торможение, настройка шага
* Сохранение всех настроек в энергонезависимой памяти

#### Eщё по мелочи:

* Три независимых блока настроек, в каждом по 3 обмотки. Итого 9 групп параметров
* Качественная работа с энкодером, программное подавление дребезга, поддержка разных типов энкодеров
* Блок глобальных настроек. Сейчас можно отключить паузу между слоями и настроить ускорение при разгоне и торможении
* Скорость теперь задается в оборотах в минуту (RPM) с шагом 30. 

#### Ограничения:

* К сожалению, теперь нельзя менять скорость во время намотки мгновенно. Новая скорость применится только к следующему слою, либо нужно ставить на паузу. Это плата за плавное синхронное движение двигателей

## Установка
### Необходимые библиотеки

Перед первой сборкой установите все нужные библиотеки из менеджера библиотек Arduino IDE [[как установить](https://alexgyver.ru/lessons/library-using/)]

* LiquidCrystal 1.0.7 или новее либо LiquidCrystal_I2C 1.1.2 или новее, в зависимости от подключения дисплея
* GyverStepper **2.6.4** или новее
* EnсButton 2.0.0 или новее

### Настройки в коде

Отредактируйте файл [config.h](https://github.com/apaex/ArduinoWindingMachine/blob/main/Arduino_winding_machine/config.h), который лежит в каталоге прошивки, если вы используете железо, отличающееся от того, которое в статье. Например, размер своего дисплея.

* Обратите внимание на тип энкодера (ENCODER_TYPE). Если вы используете толстый энкодер, то он будет "проскакивать" и нужно в файле изменить его тип 
* Проверьте шаг резьбы вала намотчика (THREAD_PITCH), теперь он в мкм

